<!-- anonymous-chat.html -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<title>Anonymous Chat</title>
	<link rel="stylesheet" href="styles.css"/>
</head>
<body>
	<header class="nav">
		<div class="nav-left">
			<div class="brand"><div class="brand-logo">CC</div><div class="brand-text">CampusConnect</div></div>
			<nav class="nav-links">
				<a href="index.html">Home</a>
				<a href="mentorship.html">Mentorship Hub</a>
				<a href="events.html">Events & Opportunities</a>
				<a href="skill-swap.html">Skill Swap & Team Finder</a>
				<a href="anonymous-chat.html">Anonymous Chat</a>
			</nav>
		</div>
		<div class="nav-right">
			<a class="btn ghost" href="auth.html#signin">Sign In</a>
			<a class="btn solid" href="auth.html#signup">Sign Up</a>
		</div>
	</header>

	<section class="features" style="margin-top:20px">
		<h2>Anonymous Lounge</h2>
		<p class="small">Global anonymous lounge and 1:1 anonymous chats. Moderation and reporting supported.</p>
		<div class="form-grid">
		 <div class="form-row" style="grid-column:1/-1">
		  <label>Your message (anonymous)</label>
		  <input id="msg" placeholder="Ask anything respectfully..."/>
		 </div>
		</div>
		<div class="form-actions">
			<button class="btn solid" id="send">Send</button>
			<p class="small">Report inappropriate content using the flag button.</p>
		</div>
		<hr class="sep"/>
		<div id="chat"></div>
	</section>

	<script>
	const feed=JSON.parse(localStorage.getItem('gm_anon_feed')||'[]');
	function save(){ localStorage.setItem('gm_anon_feed',JSON.stringify(feed)); }
	function render(){
		const box=document.getElementById('chat'); box.innerHTML='';
		feed.slice().reverse().forEach((m,idx)=>{
			const div=document.createElement('div');
			div.className='feature';
			div.innerHTML=`<p>${m.text}</p>
			<div class="form-actions">
				<span class="small">Anon ‚Ä¢ ${new Date(m.at).toLocaleString()}</span>
				<span>
					<button class="btn ghost" data-flag="${idx}">üö© Report</button>
					<button class="btn ghost" data-del="${idx}">üóëÔ∏è Remove (admin demo)</button>
				</span>
			</div>`;
			box.appendChild(div);
		});
		document.querySelectorAll('[data-flag]').forEach(b=>b.onclick=()=>alert('Reported. Moderators will review.'));
		document.querySelectorAll('[data-del]').forEach(b=>b.onclick=()=>{
			const i=Number(b.getAttribute('data-del')); feed.splice(feed.length-1-i,1); save(); render();
		});
	}
	document.getElementById('send').onclick=()=>{
		const t=document.getElementById('msg').value.trim();
		if(!t){ alert('Type a message.'); return; }
		feed.push({text:t,at:Date.now()}); save(); render(); document.getElementById('msg').value='';
	};
	render();
	</script>
</body>
</html>